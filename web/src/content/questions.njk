---
layout: layouts/page
permalink: "questions/"
eleventyComputed:
    title: "Parlementaire vragen in de Kamer"
    description: "Blader door alle schriftelijke en mondelinge vragen van Belgische Kamerleden. Bekijk wie wat vroeg en wanneer, met antwoorden van ministers."
---

<!-- COMPONENTS -->
{%- from "components/question-card-tiny.njk" import questionCardTiny -%}

<h1>Alle Vragen</h1>

<p>Een overzicht van alle vragen die gesteld werden tijdens de plenaire vergaderingen en de commissievergaderingen. Bekijk recente vragen of zoek op onderwerp.</p>

<div class="card padding metric" style="margin-bottom: 1rem;">
    <h2>{{ questions.questions | length }}</h2>
    <p>vragen</p>
</div>

<!-- FILTER -->
<select id="topicFilter" style="margin-bottom: 2rem;">
    <option value="">Alle onderwerpen</option>
    {% for key in topics | keys %}
    <option value="{{ key }}">{{ key }}</option>
    {% for subtopic in topics[key].subtopics | keys %}
    <option value="{{ subtopic }}">â€“ {{ subtopic }}</option>
    {% endfor %}
    {% endfor %}
</select>

<!-- ITEM COUNT -->
<div class="flex space-between">
    <span id="questionCount">{{ questions.questions | length }} vragen</span>
</div>

<!-- ITEM LIST -->
{% for meeting in meetings.meetings | sort(attribute='date', true) %}
{% if meeting.questions.length > 0 %}
<div class="meeting-group">
    <h3>{{ meeting.date | date }}</h3>
    <div id="question-list">
        {% for question in meeting.questions %}
        {% set allTopics = question.topics_nl | getMatchedTopics(topics) %}
        <div class="question-card-wrapper" data-topics="{{ allTopics | join(',') }}">
            {{ questionCardTiny({ question: question, topic: allTopics[0], topics: topics, functions: functions, translations: languages['nl'], language: nl, showCategory: "true" }) }}
        </div>
        {% endfor %}
    </div>
    <hr>
</div>
{% endif %}
{% endfor %}

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const filterSelect = document.getElementById("topicFilter");
        const cards = document.querySelectorAll(".question-card-wrapper");

        filterSelect.addEventListener("change", () => {
            const selectedTopic = filterSelect.value;
            cards.forEach(card => {
                const topics = card.dataset.topics.split(',').map(t => t.trim());
                const shouldShow = !selectedTopic || topics.includes(selectedTopic);
                card.style.display = shouldShow ? "block" : "none";
            });

            // Update question count
            const visibleCount = Array.from(cards).filter(card => card.style.display !== "none").length;
            const countText = `${visibleCount} ${visibleCount === 1 ? 'vraag' : 'vragen'}`;
            document.getElementById("questionCount").textContent = countText;

            // Hide meetings with no visible questions
            const meetingGroups = document.querySelectorAll(".meeting-group");
            meetingGroups.forEach(group => {
                const questionCards = group.querySelectorAll(".question-card-wrapper");
                const anyVisible = Array.from(questionCards).some(card => card.style.display !== "none");
                group.style.display = anyVisible ? "block" : "none";
            });
        });
    });

</script>
